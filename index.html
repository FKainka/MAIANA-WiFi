<!DOCTYPE html>
<html>

<head>
    <title>MAIANA</title>
    <style>
        body {
            align-items: center;
            background-color: #000;
            justify-content: center;
            font-family: sans-serif;
            font-size: 18px;
            color: #eee;
        }

        form {
            display: block;
            background-color: #15172b;
            border-radius: 20px;
            box-sizing: border-box;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            margin: 20px;
        }

        h1 {
            display: block;
            border-radius: 20px;
            box-sizing: border-box;
            text-align: center;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            margin: 20px;
            align-items: center;
            color: #eee;
            font-family: sans-serif;
            font-size: 36px;
            font-weight: 600;
        }
        
        #infobox{
            display: block;
            border-radius: 20px;
            box-sizing: border-box;
            text-align: center;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            margin: 20px;
            align-items: center;
            color: #eee;
        }

        legend {
            color: #eee;
            border-radius: 20px;
            font-weight: 600;
            margin-top: 10px;
        }

        input {
            background-color: #303245;
            border-radius: 12px;
            border: 0;
            box-sizing: border-box;
            color: #eee;
            font-size: 18px;
            height: 100%;
            outline: 0;
            padding: 4px 20px 0;
            width: 100%;
        }

        select {
            appearance: none;
            min-height: 50px;
            position: center;
            width: 100%;
            margin-top: 20px;
            background-color: #303245;
            border-radius: 12px;
            border: 0;
            box-sizing: border-box;
            color: #eee;
            font-size: 18px;
            height: 100%;
            outline: 0;
            padding: 4px 20px 0;
        }

        input[type=text],
        [type=number] {
            min-height: 50px;
            position: center;
            width: 100%;
            margin-top: 20px;
        }

        input[type=radio] {
            display: none;
            margin: 10px;
        }

        input[type=radio]+label {
            border-radius: 12px;
            text-align: center;
            height: 50px;
            display: inline-block;
            margin-top: 20px;
            margin-bottom: 5px;
            font-family: sans-serif;
            font-size: 18px;
            color: #eee;
            background-color: #303245;
            border-color: #ddd;
            padding: 4px 20px 0;
            width: 100%;
        }

        input[type=radio]:checked+label {
            background-color: #06b;
        }

        .radioButtons {
            display: flex;
            justify-content: space-around;
        }

        button {
            background-color: #08d;
            border-radius: 12px;
            border: 0;
            box-sizing: border-box;
            color: #eee;
            cursor: pointer;
            font-size: 18px;
            height: 50px;
            margin-top: 20px;
            margin-bottom: 5px;
            outline: 0;
            text-align: center;
            width: 100%;
        }

        button:active {
            background-color: #06b;
        }
    </style>
</head>

<body>
    <h1>MAIANA</h1>
    <div id="infobox">
        INFO BOX

    </div>
    <div>
        <button type="button" id="refresh">refresh</button>
        <form>
            <fieldset>
                <legend>WiFi settings</legend>

                <div class="radioButtons">
                    <input type="radio" id="wifi-ap" name="wifi" value="ap" checked>
                    <label for="wifi-ap">AP</label>

                    <input type="radio" id="wifi-cli" name="wifi" value="cli">
                    <label for="wifi-cli">client</label>
                </div>

                <input type="text" id="wifi-ssid" name="ssid" value="MAIANA">
                <label for="wifi-ssid">SSID</label>

                <input type="text" id="wifi-pass" name="pass" value="" maxlength="63" required>
                <label for="wifi-pass">password</label>

                <button type="button" id="wifi-genpw">generate password</button>

                <button type="button" id="wifi-set">set</button>
            </fieldset>
        </form>
    </div>
    <div>
        <form>
            <fieldset>
                <legend>NMEA0183 forwarding</legend>

                <div class="radioButtons">
                    <input type="radio" id="protocol-none" name="protocol" value="none" checked>
                    <label for="protocol-none">NONE</label>

                    <input type="radio" id="protocol-tcp" name="protocol" value="tcp">
                    <label for="protocol-tcp">TCP</label>

                    <input type="radio" id="protocol-udp" name="protocol" value="udp">
                    <label for="protocol-udp">UDP</label>
                </div>

                <input type="number" id="protocol-port" name="port" value="10110" min="1" max="65536">
                <label for="protocol-port">PORT</label>

                <button type="button" id="protocol-set">set</button>
            </fieldset>
        </form>
    </div>
    <div>
        <form>
            <fieldset>
                <legend>Station data</legend>

                <input type="text" id="maiana-mmsi" name="maiana-mmsi" value="" required>
                <label for="maiana-mmsi">MMSI</label>

                <input type="text" id="maiana-callsign" name="maiana-callsign" value="" required>
                <label for="maiana-callsign">call sign</label>


                <select id="maiana-vesseltype">
                    <option value="30">Fishing</option>
                    <option value="34">Diving</option>
                    <option value="36">Sailing</option>
                    <option value="37" selected>Pleasure craft</option>
                </select>

                <label for="maiana-vesseltype">vessel type</label>


                <input type="number" id="maiana-loa" name="maiana-loa" value="" min="1" required>
                <label for="maiana-loa">LOA (m)</label>

                <input type="number" id="maiana-beam" name="maiana-beam" value="" min="1" required>
                <label for="maiana-beam">beam (m)</label>

                <input type="number" id="maiana-portoffset" name="maiana-portoffset" value="" min="0" required>
                <label for="maiana-portoffset">port offset (m)</label>

                <input type="number" id="maiana-bowoffset" name="maiana-bowoffset" value="" min="0" required>
                <label for="maiana-bowoffset">bow offset (m)</label>

                <button type="button" id="maiana-set">set</button>
            </fieldset>
        </form>
    </div>
    <script>
        function get(url, params) {
            url += '?' + new URLSearchParams(params).toString();

            return fetch(url).then(data => data.json());
        }

        document.getElementById('wifi-set').onclick = function () {
            let wifi = document.querySelector('input[name="wifi"]:checked').value;
            let port = document.getElementById('protocol-port').value;

            get("/wifi", {"protocol": protocol, "port": port}).then(data => {
                console.log(data);
            });
        };
        document.getElementById('wifi-genpw').onclick = function () {
            document.getElementById('wifi-pass').value = Math.random().toString(36).substr(2, 16);
        };

        document.getElementById('protocol-set').onclick = function () {
            let protocol = document.querySelector('input[name="protocol"]:checked').value;
            let port = document.getElementById('protocol-port').value;

            get("/protocol", {"protocol": protocol, "port": port}).then(data => {
                console.log(data);
            });
        };

        document.getElementById('maiana-set').onclick = function () {
            let protocol = document.querySelector('input[name="protocol"]:checked').value;
            let port = document.getElementById('protocol-port').value;

            get("/protocol", {"protocol": protocol, "port": port}, callback).then(data => {
                console.log(data);
            });
        };

        document.getElementById('refresh').onclick = function () { };
    </script>
</body>

</html>